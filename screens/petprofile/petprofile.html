<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link rel='stylesheet' href="petprofile.css">
    <script src='/screens/homeScreen/homepage.js'></script>
    <title>Pet Profile</title>
  </head>
  <body id='petroot'>

    <!-- navbar start -->
    <nav class="shadow-sm navbar navbar-expand-lg navbar-light bg-white sticky-top">
      <div class="container-fluid">
        <div class='mx-md-2'>
          <img class='hover-zoom' src='/img/petsoc.png' width=80 height=80>
        </div>
        <form class='ms-lg-5'>
          <input class="form-control rounded1 me-2 d-sm-inline d-none" type="search" placeholder="Search" aria-label="Search">
        </form>
        <!-- modal button start -->
        <button onmouseover='typeWriter()' id="post" style='width:200px' class='btn' data-bs-toggle="modal"
          data-bs-target="#createPost" onclick="fillPost(this.id)"><img class='float-start' width=40 height=40
            src='icons/pencil-square.svg'><span style='white-space:nowrap' class="font-monospace ms-2 float-start mt-1"
            id='newpost'></span></button>
        <!-- modal button end -->
  
        <button class="navbar-toggler mx-1 border-0 hover-color " type="button" data-bs-toggle="collapse"
          data-bs-target="#navbarScroll" aria-controls="navbarSupportedContent" aria-expanded="false"
          aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
  
        <div class="collapse navbar-collapse" id="navbarScroll">
          <ul class="navbar-nav me-auto my-2 my-lg-0 m-lg-auto" style="--bs-scroll-height: 100px;">
            <li id="home" class="nav-item mx-3 hover-color" onclick=fill(this.id)>
              <a class="nav-link active px-3" aria-current="page" href="#"><img src="icons/house-fill.svg" alt="Bootstrap"
                  width="32" height="32">
                <span class='d-sm-inline d-md-inline d-lg-none my-auto mx-3 text-dark font-monospace'>Home</span></a>
            </li>
            <li id="chat" class="nav-item mx-3 hover-color" onclick=fill(this.id)>
              <a class="nav-link px-3" href="#"><img src="./icons/chat.svg" alt="Bootstrap" width="32" height="32">
                <span class='d-sm-inline d-md-inline d-lg-none my-auto mx-3 text-dark font-monospace'>Chat</span></a>
            </li>
            <li id="profile" class="nav-item mx-3 hover-color" onclick=fill(this.id)>
              <a class="nav-link px-3" href="#"><img src="./icons/person.svg" alt="Bootstrap" width="32" height="32">
                <span class='d-sm-inline d-md-inline d-lg-none my-auto mx-3 text-dark font-monospace'>Profile</span></a>
            </li>
            <li id="map" class="nav-item mx-3 hover-color" onclick=fill(this.id)>
              <a class="nav-link px-3" href="#"><img src="./icons/pin-map.svg" alt="Bootstrap" width="30" height="30">
                <span class='d-sm-inline d-md-inline d-lg-none my-auto mx-3 text-dark font-monospace'>Nearby
                  Pets</span></a>
            </li>
            <li id="settings" class="nav-item mx-3 hover-color" onclick=fill(this.id)>
              <a class="nav-link px-3" href="#"><img src="./icons/gear.svg" alt="Bootstrap" width="32" height="32">
                <span class='d-sm-inline d-md-inline d-lg-none my-auto mx-3 text-dark font-monospace'>Settings</span></a>
            </li>
          </ul>
        </div>
  
      </div>
    </nav>
    <!-- navbar end -->

    <!-- top box -->
    <div id="topbox" class="py-3 px-3">
        <div class='row position-relative'>
            
            

            <div id='livedetails' class='card col-md-3 position-absolute bottom-0 start-0 px-0'>
            
                <div class="card-body">
                    <p class='fw-bold mb-0' style='font-size: medium;'>
                        Last Seen At
                    </p>
                    <p id='lastseenaddress' class='fw-bold mb-0'>
                        Pasir Ris BLK 123
                    </p>
                    <p id='lastseentime' class='fw-bold mb-0' style='font-size: larger;'>
                        10:30pm
                    </p>
                    <p class="card-text" style="font-size: small;">
                        To update his last seen, add a new post!
                    </p>
                </div>
                
            </div>


            <div id='imagebox' class="col col-md-5 mx-auto text-center">
                <img id='petimg' class="card-img-top rounded2" 
                style="max-height:300px; max-width:500px; object-fit:cover" 
                src="images/stripy.jpeg" 
                alt="Card image cap">
                <div class="card-body">
                    <h5 id='petName' class='card-title'>
                        Somecat
                    </h5>
                </div>

            </div>

            

            
            
        </div>


    </div>

    <!-- bottom box START-->
    <div id="bottombox">
        <!-- navigation tabs START-->
        <div id='petdetails'>
            <ul class="nav nav-tabs justify-content-center" id="myTab" role="tablist">
                <li class="nav-item" role="presentation">
                  <button class="nav-link active" id="about-tab" data-bs-toggle="tab" data-bs-target="#about" type="button" role="tab" aria-controls="about" aria-selected="true">About</button>
                </li>
                <li class="nav-item" role="presentation">
                  <button class="nav-link" id="followers-tab" data-bs-toggle="tab" data-bs-target="#followers" type="button" role="tab" aria-controls="followers" aria-selected="false">Followers</button>
                </li>
                <li class="nav-item" role="presentation">
                  <button class="nav-link" id="posts-tab" data-bs-toggle="tab" data-bs-target="#posts" type="button" role="tab" aria-controls="posts" aria-selected="false">Posts</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="photos-tab" data-bs-toggle="tab" data-bs-target="#photos" type="button" role="tab" aria-controls="photos" aria-selected="false">Photos</button>
                  </li>
              </ul>
              <!-- navigation tabs END-->

              <!-- tabs content START-->
              <div class="tab-content" id="myTabContent">

                <!-- about tab content START-->
                <div class="tab-pane fade show active" id="about" role="tabpanel" aria-labelledby="about-tab">
                    <!-- top box of about content START-->
                    <div class='row' style='height: 300px;'>
                        <div id='aboutdetails' class="card col-md">
                            <div class="card-body">
                                <p id='founded'>Founded: 06/10/2020</p>
                                <br>
                                <p id='breed'>Breed: Cat, Some cat Breed</p>
                                <br>
                                <p id='gender'>Breed: Cat, Some cat Breed</p>
                                <br>
                                
                                MORE DETAILS
                            </div>
                        </div>
    
                        <div id='feederdetails'class="card col-md" >
                            <div class="card-body">
                                Founded: 06/10/2020
                                <br>
                                Breed: Cat, Some cat Breed
                                <br>
                                Gender: MALE
                                <br>
                                
                                MORE DETAILS
                            </div>
                        </div>
                    </div>
                    <!-- top box of about content END-->

                    <!-- bottom of about content(location api) START-->
                    <div id='locationbox' class='row' >
                        <div class='container-fluid border-primary border' style='height: 300px; width:100%; background-color: rgb(165, 165, 165);'>
                                <p>GOOGLE API TO SHOW WHERE IS THE LAST SEEN AND YOU</p>
                        </div>


                    </div>
                    <!-- bottom of about content(location api) END -->
                    
                </div>
                <!-- about tab content END-->

                <!-- followers tab content START-->
                <div class="tab-pane fade" id="followers" role="tabpanel" aria-labelledby="followers-tab">
                    Gerald
                    Xuan
                </div>
                <!-- followers tab content END-->

                <!-- posts tab content START-->
                <div class="tab-pane fade" id="posts" role="tabpanel" aria-labelledby="posts-tab">
                    box
                    pepega
                </div>
                <!-- posts tab content END-->

                <!-- photos tab content START-->
                <div class="tab-pane fade" id="photos" role="tabpanel" aria-labelledby="photos-tab">
                    Photos box
                </div>
                <!-- photos tab content END-->
              </div>
              <!-- tabs content END-->

        </div>
    </div>
    <!-- bottom box END-->










    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>

    <!-- Option 2: Separate Popper and Bootstrap JS -->
    <!--
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js" integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js" integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13" crossorigin="anonymous"></script>
    -->
    
  </body>
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
<script src='https://www.gstatic.com/firebasejs/7.7.0/firebase-app.js'></script>
<script src='https://www.gstatic.com/firebasejs/7.7.0/firebase-storage.js'></script>
<!-- vuejs -->
<script src="https://unpkg.com/vue@next"></script>
<script src='connectpet.js'></script>
<script>

  //get petID from url
    console.log(window.location.href)
    var url_string = window.location.href; //window.location.href
    var url = new URL(url_string);
    var petID = url.searchParams.get("petID");
    console.log(petID);
    //get petID from url

    
    console.log("Pet loaded");
    getPetByID(petID);
    //run getpetID
    
    

    function getPetByID(petID) {
    // userID= toString(userID)
    tableName = "petProfile"
    firebaseurl = "https://wadgroup31-e83d0-default-rtdb.asia-southeast1.firebasedatabase.app/";
    url = firebaseurl + tableName + "/data/" + petID + ".json"
    output = null
    console.log(url)
    axios.get(url)
        .then((response) => {
            output = response.data
            petName = output.petName;
            console.log("YOYOYO: ",petName);
            petPictureUrl = output.petPictureUrl;
            breed = output.breed;
            foundedDate = output.foundedDate;
            founder = output.founder;
            pet_gender = output.gender;
            lastSeenLocation = output.lastSeenLocation;
            document.getElementById('founded').innerText=foundedDate;
            document.getElementById('petName').innerText=petName;
            document.getElementById('gender').innerText=pet_gender;
            document.getElementById('petimg').src=petPictureUrl;
            document.getElementById('breed').innerText=breed;
            document.getElementById('lastseenaddress').innerText=lastSeenLocation;
            
        }, 
        (error) => {
            console.log(error);
            output = error
            
        });}
    

   //login verification
    /*
    myStorage = window.sessionStorage;
  if (myStorage.userID===undefined){
        console.log("Not login")
        // console.log(myStorage)
        myStorage.redirect = 'fromLoginNoAccount'
        window.location.href = "/screens/welcomeScreen/login.html"; 
    }else{
        console.log("Login")
        // console.log(myStorage)
        user_id = myStorage.userID
        // console.log(user_id)
    }*/
</script>
</html>