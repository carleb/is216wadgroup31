<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pet Profile</title>
</head>
<!-- Bootstrap CSS -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
<link rel='stylesheet' href="/css/petprofile.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css">
<link rel="stylesheet" href="/css/homepage.css">




<body id='petroot' onload='onboarding(),typeWriter()' class='font-monospace'>

    <!-- navbar start -->
    <nav class="shadow-sm navbar navbar-expand-lg navbar-light sticky-top website-topbar">
        <div class="container-fluid">
            <div class='mx-md-2 overflow-visible'>
                <a href="/screens/homeScreen.html">
                    <img style="position: relative; left: 30%" class='hover-zoom' src='/images/petsoc.png' width=80
                        height=80>
                </a>
            </div>
            <div id="nav-middle" class="d-flex flex-row" style='left:0px'>
                <form class='mx-lg-auto' autocomplete="off">
                    <input style='margin-top:11px;' class="form-control rounded1 me-2 d-md-inline d-none" type="search"
                        placeholder="Search for Users or Pets" aria-label="Search" id='websearchInput'
                        onkeyup="loadWebSearch()" onclick="loadWebSearchList()">
                    <ul class='rounded2 themebg position-fixed mt-2 shadow' id="webSearchDisplay"
                        style='list-style-type: none; padding: 0; margin: 0; border:0;display:none;'>
                    </ul>
                </form>

                <!-- modal button start -->
                <button id="post" class='btn ms-lg-3 d-flex hover-color' data-bs-toggle="modal"
                    data-bs-target="#createPost" onclick="fillPost(this.id)"><img class='float-start' width=40 height=40
                        src='/images/icons/pencil-square.svg'><span style='white-space:nowrap'
                        class="fs-5 ms-1 float-start mt-2" id='newpost'></span>
                </button>
            </div>
            <!-- modal button end -->

            <button class="navbar-toggler mx-1 border-0 hover-color " type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarScroll" aria-controls="navbarSupportedContent" aria-expanded="false"
                aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="navbarScroll">
                <ul id='navBarIcons' class="navbar-nav" style="--bs-scroll-height: 100px; position: relative;">
                    <li id="search" class="nav-item mx-4 d-inline d-md-none mt-2 mb-3">
                        <form class='px-2' autocomplete="off">
                            <input class="form-control rounded1 me-2" type="search"
                                placeholder="Search for Users or Pets" aria-label="Search" id='mobilesearchInput'
                                onkeyup="loadMobileSearch()" onclick="loadMobileSearchList()">

                            <ul id="mobileSearchDisplay" class='rounded2 themebg mt-2 shadow'
                                style='list-style-type: none; padding: 0; margin: 0;display:none;'>
                            </ul>
                        </form>
                    </li>
                    <li id="petsgallery" class="nav-item mx-3 hover-color">
                        <a class="nav-link active px-3" href="/screens/allPets.html"><img
                                src="/images/icons/animals.png" alt="Bootstrap" width="32" height="32">
                            <span class='d-sm-inline d-md-inline d-lg-none my-auto mx-3 text-dark '>Pets
                                Gallery</span></a>
                    </li>

                    <li id="home" class="nav-item mx-3 hover-color" onclick=fill(this.id)>
                        <a class="nav-link active px-3" aria-current="page" href="/screens/homeScreen.html"><img
                                src="/images/icons/house.svg" alt="Bootstrap" width="32" height="32">
                            <span class='d-sm-inline d-md-inline d-lg-none my-auto mx-3 text-dark '>Home</span></a>
                    </li>

                    <!-- right now it navigates to the one for mobile -->
                    <li id="chat" class="nav-item mx-3 hover-color" onclick=fill(this.id)>
                        <a class="nav-link px-3" href="/screens/livechat.html"><img src="/images/icons/chat.svg"
                                alt="Bootstrap" width="32" height="32">
                            <span class='d-sm-inline d-md-inline d-lg-none my-auto mx-3 text-dark '>Chat</span></a>
                    </li>
                    <li class="nav-item mx-3 hover-color dropdown" onclick=fill(this.id)>
                        <a class="nav-link px-3 dropdown-toggle" href="#" data-bs-toggle="dropdown"><img
                                src="/images/icons/person.svg" alt="Bootstrap" width="32" height="32">
                            <span class='d-sm-inline d-md-inline d-lg-none my-auto mx-3 text-dark '>Profile</span></a>
                        <ul class="dropdown-menu rounded2 themebg border border-0 shadow">
                            <li id="profile" class='hover-color2'><a class="dropdown-item hover-color2" href="#">Your
                                    Profile</a></li>
                            <li id="logout" onclick=logout()><a class="dropdown-item hover-color3" href="#"> Log Out
                                </a></li>
                        </ul>
                    </li>

                </ul>
            </div>
        </div>
    </nav>
    <!-- navbar end -->

    <!-- Feeder Image Model -->
    <div class="modal fade " id="viewFeederDetails" tabindex="-1" aria-labelledby="exampleModalLabel"
        aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title fw-bold" id="feederName">Name</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body" id='post-body'>

                    <!-- form start -->
                    <!-- drop files start-->
                    <div>
                        <img id='feederIMG' class="card-img-top rounded2 shadow hover-zoom-img"
                            style='max-height:500px; object-fit:cover' alt="Card image cap">
                    </div>
                    <div id='feederTime' class='m-3'>
                        Feed At :
                    </div>

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-brown" data-bs-dismiss="modal">Close</button>
                </div>
                <!-- form end -->

            </div>
        </div>
    </div>
    <!-- Feeder Image End -->
    <!-- Post Model -->
    <div class="modal fade " id="createPost" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title fw-bold" id="exampleModalLabel">Create A New Post</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body" id='post-body'>

                    <!-- form start -->
                    <!-- drop files start-->
                    <div class="input-group">
                        <button type="button" class="btn themebg hover-color2 rounded2 mb-1"> <label
                                id='uploadImageLabel' for="file">Upload an Image</label></button>
                        <input type="file" class="button button-secondary m-2" style="display:none" id="file"
                            accept="image/png, image/jpeg, image/heic" name="file" multiple
                            onchange="loadImageDisplay(event)">
                    </div>
                    <div class='ml-3'>
                        <img id="output" class="card-img-top rounded2 shadow"
                            style='max-height:500px; object-fit:cover'>
                    </div>

                    <!-- drop files end-->

                    <!-- post text start -->
                    <label class='ms-2' for='post-text'>Caption:</label>
                    <div class="input-group m-2">
                        <textarea placeholder="Post Caption" id="post-text" name="text" type="textbox"
                            class="form-control"></textarea>
                    </div>
                    <label class='ms-2' for='tagsearchInput'>Tag:</label>
                    <form class='input-group m-2' autocomplete="off">
                        <input placeholder="Who are you with?" id='tagsearchInput' onkeyup="loadTagSearch()"
                            onclick="loadTagSearchList()" name="Tag" type="Tag" class="form-control ml-3">
                        <!-- <input class="form-control rounded1 me-2 d-sm-inline d-none" type="search" placeholder="Search for Users or Pets" aria-label="Search" id='websearchInput'onkeyup="loadWebSearch()" onclick="loadWebSearchList()"> -->
                    </form>
                    <ul id="tagSearchDisplay" class='themebg rounded2'
                        style='position:fixed;z-index: 100;list-style-type: none; padding: 0; margin: 0;'>
                    </ul>
                    <!-- <div class="input-group m-2">
            </div> -->

                    <!-- post text end -->

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" data-bs-dismiss="modal"
                        onclick="createPost()">Post</button>
                </div>
                <!-- form end -->

            </div>
        </div>
    </div>
    <!-- modal end -->
    <!-- top box START-->
    <div id="topbox" class="py-3 px-3">

        <div id='imagebox' class=" text-center">
            <img id='petimg' class="card-img-top rounded1 shadow-sm"
                style=" border-radius:10%;max-height:400px; max-width:400px; object-fit:cover" src='#'
                alt="Card image cap">
            <div class="card-body">
                <div id='livedetails' class='card rounded2 border border-0 my-auto text-center mx-auto'
                    style=" border-radius:10%;max-height:400px; max-width:400px;">
                    <div class="card-body">
                        <h5 id='petName' class='card-title fw-bold' style='font-size: larger;overflow:hidden;'>
                            Loading Pet Name...
                        </h5>
                        <p class='fw-bold mb-0' style='font-size: large;'>
                            Last Seen:
                        </p>
                        <p id='lastseenaddress' class='mb-0'>
                            Loading Address...
                        </p>
                        <p id='lastseentime' class='mb-0' style='font-size: small;'>
                           
                        </p>
                        <p id='lastseentimemsg' class="card-text" style="font-size: small;">
                            To update his last seen, add a new post!
                        </p>
                        <p style="font-size: large;" class='fw-bold mb-0' id='recommendedFeeding'>Loading last fed...
                        </p>

                    </div>
                </div>

                <button id='follow_or_unfollow' type="button"
                    class="custom-file-upload rounded mx-auto px-5 py-1 btn-brown mt-3" style='border:0;'
                    onclick="followandunfollow()">Follow </button>
            </div>
        </div>

    </div>
    <!-- top box END -->

    <!-- bottom box START-->
    <div id="bottombox">
        <!-- navigation tabs START-->
        <div id='petdetails'>
            <ul class="nav nav-tabs justify-content-center" id="myTab" role="tablist" style='background-color:#ffe7d9'>
                <li class="nav-item overflow-hidden" role="presentation">
                    <button class="lead nav-link text-muted active" id="about-tab" data-bs-toggle="tab"
                        data-bs-target="#about" type="button" role="tab" aria-controls="about"
                        aria-selected="true">About</button>
                </li>
                <li class="nav-item overflow-hidden" role="presentation">
                    <button class="lead nav-link text-muted" id="posts-tab" data-bs-toggle="tab" data-bs-target="#posts"
                        type="button" role="tab" aria-controls="posts" aria-selected="false">Posts</button>
                </li>
                <li class="nav-item overflow-hidden" role="presentation">
                    <button class="lead nav-link text-muted" id="photos-tab" data-bs-toggle="tab"
                        onclick='processLoadImages()' data-bs-target="#photos" type="button" role="tab"
                        aria-controls="photos" aria-selected="false">Photos</button>
                </li>
                <li class="nav-item overflow-hidden" role="presentation">
                    <button class="lead nav-link text-muted" id="followers-tab" data-bs-toggle="tab"
                        data-bs-target="#followers" type="button" role="tab" aria-controls="followers"
                        aria-selected="false">Followers</button>
                </li>
            </ul>
            <!-- navigation tabs END-->

            <!-- tabs content START-->
            <div class="tab-content" id="myTabContent">

                <!-- about tab content START-->
                <div class="tab-pane fade show active" id="about" role="tabpanel" aria-labelledby="about-tab">
                    <!-- top box of about content START-->
                    <div class='row' id="about">
                        <div id='aboutdetails' class="card col-md themebg2 ms-3">
                            <div class="card-body my-5">
                                <p class="fs-5" id='founded'></p>
                                <p class="fs-5" id='founder'></p>
                                <p class="fs-5" id='breed'></p>
                                <p class="fs-5" id='gender'></p>
                                <p class="fs-5" id='details' class='overflow-hidden'></p>
                            </div>
                        </div>

                        <div id='feederdetails' class="card col-md themebg2 py-5">
                            <div class="card-body">
                                <div id='lastFed'>

                                </div>
                                <div id='feederinfo' class="card-text mb-4">
                                    <!-- <h5 class="card-title overflow-hidden">Past Feeders:</h5> -->
                                    <!-- <b>No Past Feeders, be the first!</b> -->
                                </div>

                                <button data-bs-toggle="modal" data-bs-target="#feederForm" id='feederapply'
                                    type="button" class="btn btn-lg btn-outline-primary">Mark Pet as Fed</button>


                            </div>
                        </div>
                    </div>
                    <!-- top box of about content END-->
                    <!-- Feeder Modal -->
                    <div class="modal fade" id="feederForm" tabindex="-1" aria-labelledby="exampleModalLabel"
                        aria-hidden="true">
                        <div class="modal-dialog modal-lg">
                            <div class="modal-content p-4">
                                <div class="modal-header">
                                    <h3 class="modal-title" id="exampleModalLabel">Proof of Feeding</h3>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal"
                                        aria-label="Close"></button>
                                </div>
                                <div class="modal-body" id='feederFormBody'>

                                </div>
                                <div class="modal-footer">
                                    <p id='feederInfoComplete'></p>
                                    <button type="button" class="btn btn-brown"
                                        data-bs-dismiss="modal">Close</button>
                                    <button onClick='feedingProof(this)' type="button" class="btn btn-primary">Mark as
                                        Fed</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Modal END -->
                    <!-- bottom of about content(location api) START-->
                    <div class='row'>
                        <div id='locationbox' class='container-fluid'
                            style='width:100%; background-color: #FCDFCE'>
                        </div>
                    </div>
                    <!-- bottom of about content(location api) END -->

                </div>
                <!-- about tab content END-->

                <!-- followers tab content START-->
                <div class="tab-pane fade" id="followers" role="tabpanel" aria-labelledby="followers-tab">
                    <div id='followercount' class='my-3 text-center'>
                    </div>
                    <div id='followerslist' class="row mx-3">
                    </div>
                </div>
                <!-- followers tab content END-->

                <!-- posts tab content START-->
                <div class="tab-pane fade" id="posts" role="tabpanel" aria-labelledby="posts-tab">
                    <div id='postcount'>
                        <div class='my-3 text-center'>
                            No posts
                        </div>
                    </div>
                    <div id='post-list'>

                    </div>
                </div>
                <!-- posts tab content END-->

                <!-- photos tab content START-->
                <div class="tab-pane fade" id="photos" role="tabpanel" aria-labelledby="photos-tab">
                    <div id='photocount' class='my-3 text-center'>
                    </div>
                    <div class='container p-3'>
                        <div id='photogallery' class="row">
                        </div>
                    </div>
                </div>
                <!-- photos tab content END-->
            </div>
            <!-- tabs content END-->
        </div>
    </div>
    <!-- bottom box END-->




</body>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
    crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script src='https://www.gstatic.com/firebasejs/7.7.0/firebase-app.js'></script>
<script src='https://www.gstatic.com/firebasejs/7.7.0/firebase-storage.js'></script>
<!-- vuejs -->
<script src="https://unpkg.com/vue@next"></script>
<script src='/scripts/firebase/connector.js'></script>
<script src='/scripts/homepage.js'></script>
<script src='/scripts/firebase/createPost.js'></script>

<script src='/scripts/petprofile.js'></script>
<!--masonry js-->
<script src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js"
    integrity="sha384-GNFwBvfVxBkLMJpYMOABq3c+d3KnQxudP/mGPkzpZSTYykLBNsZEnG2D9G/X/+7D" crossorigin="anonymous"
    async></script>
<script src="https://unpkg.com/imagesloaded@4/imagesloaded.pkgd.js"></script>
<script>
    function createPost() {
        const file = document.getElementById("file").files[0]
        createNewPost()
    }
    currentLocation = "no location"
    function success(position) {
        const latitude = position.coords.latitude;
        const longitude = position.coords.longitude;
        currentLocation = { latitude: latitude, longitude: longitude }
    }

    function error() {
        console.log(currentLocation)
    }

    if (!navigator.geolocation) {
        alert('Geolocation is not supported by your browser');
    } else {
        navigator.geolocation.getCurrentPosition(success, error);
    }

    myStorage = window.sessionStorage;
    if (myStorage.userID === undefined) {
        console.log("Not login")
        // console.log(myStorage)
    } else {
        console.log("Login")
        // console.log(myStorage)
        user_id = myStorage.userID
        // console.log(user_id)
    }
    console.log(myStorage)
</script>

</html>